<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é‚±è±ªç‰›é€¼ä¸“å±å°ç½‘é¡µ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰² -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'soft-pink': '#FFE6EA',
            'soft-blue': '#E6F0FF',
            'soft-green': '#E6FFEE',
            'soft-yellow': '#FFFBE6',
            'soft-purple': '#F0E6FF',
            'soft-orange': '#FFF0E6',
            'special': '#D1E7FE'
          }
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .note-shadow {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      .paw-icon {
        position: absolute;
        top: 8px;
        right: 8px;
        font-size: 12px;
        opacity: 0.7;
      }
      .overlay {
        backdrop-filter: blur(5px);
      }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen overflow-hidden">
  <!-- å‡†å¤‡æç¤ºå¼¹çª— -->
  <div id="prompt-overlay" class="fixed inset-0 bg-black/50 overlay z-50 flex items-center justify-center">
    <div class="bg-white rounded-lg p-8 max-w-md w-full text-center shadow-xl">
      <h2 class="text-2xl font-bold mb-6">ä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ</h2>
      <div class="flex gap-4 justify-center">
        <button id="ready-btn" class="px-6 py-3 bg-green-500 text-white rounded-md hover:bg-green-600 transition">å‡†å¤‡å¥½äº†</button>
        <button id="not-ready-btn" class="px-6 py-3 bg-red-500 text-white rounded-md hover:bg-red-600 transition">æ²¡å‡†å¤‡å¥½</button>
      </div>
      <p id="response-text" class="mt-4 text-gray-600 hidden"></p>
    </div>
  </div>

  <div id="notes-container" class="relative w-full h-screen opacity-0 transition-opacity duration-1000"></div>

  <script>
    // ä¾¿ç­¾æ–‡æœ¬å†…å®¹
    const noteTexts = [
      "é‚±è±ªç‰›å‘—",
      "é‚±è±ªçœŸç‰›",
      "é‚±è±ªæœ€ç‰›",
      "ç¥ä½ å˜èƒ–",
      "è¶Šåƒè¶Šèƒ–",
      "èƒ–å¾—å¯çˆ±",
      "ç¦æ°”æ»¡æ»¡",
      "å¥½è¿è¿è¿",
      "ä¸‡äº‹é¡ºåˆ©",
      "å¤©å¤©å¼€å¿ƒ",
      "å¿ƒæƒ³äº‹æˆ",
      "ç¬‘å£å¸¸å¼€",
      "å‰ç¨‹ä¼¼é”¦",
      "å¹³å®‰å–œä¹",
      "å¥åº·æ— å¿§",
      "å¹¸ç¦ç¾æ»¡",
      "è´¢æºå¹¿è¿›",
      "æ­¥æ­¥é«˜å‡",
      "ä¸€å¸†é£é¡º",
      "å¤§å±•å®å›¾"
    ];
    
    // æŸ”å’Œçš„ä¾¿ç­¾é¢œè‰²
    const noteColors = [
      'soft-pink',
      'soft-blue',
      'soft-green',
      'soft-yellow',
      'soft-purple',
      'soft-orange'
    ];
    
    // åˆ›å»º500ä¸ªä¾¿ç­¾
    const totalNotes = 500;
    const container = document.getElementById('notes-container');
    const overlay = document.getElementById('prompt-overlay');
    const readyBtn = document.getElementById('ready-btn');
    const notReadyBtn = document.getElementById('not-ready-btn');
    const responseText = document.getElementById('response-text');
    let notes = [];
    let animationStarted = false;
    
    // ç”Ÿæˆçˆ±å¿ƒå½¢çŠ¶çš„åæ ‡ç‚¹ï¼ˆä¸­å¿ƒç©ºç™½è¾ƒå¤§ï¼‰
    function generateHeartShapePoints(count) {
      const points = [];
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      const baseSize = Math.min(window.innerWidth, window.innerHeight) * 0.3;
      
      // ä½¿ç”¨å¿ƒå½¢æ›²çº¿æ–¹ç¨‹ç”Ÿæˆç‚¹ï¼Œæ§åˆ¶å†…éƒ¨ç©ºç™½å¤§å°
      for (let i = 0; i < count; i++) {
        // å¢åŠ åŠå¾„èŒƒå›´ï¼Œä½¿ä¸­å¿ƒç©ºç™½æ›´å¤§
        const t = Math.random() * Math.PI * 2;
        const r = 0.7 + Math.random() * 0.6; // 0.7-1.3çš„èŒƒå›´ï¼Œä½¿å†…éƒ¨æœ‰è¾ƒå¤§ç©ºç™½
        
        // å¿ƒå½¢å‚æ•°æ–¹ç¨‹
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
        
        // ç¼©æ”¾å¹¶å®šä½åˆ°ä¸­å¿ƒ
        const pointX = centerX + x * baseSize / 16;
        const pointY = centerY - y * baseSize / 16; // è´Ÿå·æ˜¯ä¸ºäº†æ­£å‘æ˜¾ç¤º
        
        points.push({x: pointX, y: pointY});
      }
      
      return points;
    }
    
    // ç”Ÿæˆæ•£å¼€åçš„éšæœºä½ç½®
    function generateScatteredPoints(count) {
      const points = [];
      const padding = 100;
      
      for (let i = 0; i < count; i++) {
        const x = padding + Math.random() * (window.innerWidth - padding * 2);
        const y = padding + Math.random() * (window.innerHeight - padding * 2);
        points.push({x, y});
      }
      
      return points;
    }
    
    // åˆ›å»ºä¾¿ç­¾å…ƒç´ 
    function createNote(index, isSpecial = false) {
      const note = document.createElement('div');
      
      // éšæœºé€‰æ‹©æ–‡æœ¬å’Œé¢œè‰²
      const text = noteTexts[Math.floor(Math.random() * noteTexts.length)];
      const color = isSpecial ? 'special' : noteColors[Math.floor(Math.random() * noteColors.length)];
      
      // éšæœºå¤§å° (é™¤äº†ç‰¹æ®Šä¾¿ç­¾)
      const sizeClass = isSpecial ? 'w-32 h-32 text-xl' : 
        `w-${16 + Math.floor(Math.random() * 6)} h-${16 + Math.floor(Math.random() * 6)} text-sm md:text-base`;
      
      // éšæœºæ—‹è½¬è§’åº¦
      const rotation = (Math.random() * 10 - 5) + 'deg';
      
      note.className = `absolute ${sizeClass} bg-${color} rounded-md p-4 note-shadow transition-all duration-700 ease-out`;
      note.style.transform = `rotate(${rotation}) translateY(${window.innerHeight}px)`;
      note.innerHTML = `
        <span>${text}</span>
        <div class="paw-icon">ğŸ¾</div>
      `;
      
      // ç‰¹æ®Šä¾¿ç­¾çš„æ ·å¼
      if (isSpecial) {
        note.innerHTML = `
          <span class="font-bold text-center block mt-6">é‚±è±ªä¸“å±</span>
          <div class="paw-icon">ğŸ¾</div>
        `;
        note.classList.add('z-10', 'font-bold', 'border-2', 'border-blue-300');
      }
      
      container.appendChild(note);
      return note;
    }
    
    // åˆå§‹åŒ–æ‰€æœ‰ä¾¿ç­¾
    function initNotes() {
      // ç”Ÿæˆä½ç½®ç‚¹
      const heartPoints = generateHeartShapePoints(totalNotes - 1); // ç•™å‡ºä¸€ä¸ªä½ç½®ç»™ç‰¹æ®Šä¾¿ç­¾
      const scatterPoints = generateScatteredPoints(totalNotes);
      
      // æ¸…ç©ºç°æœ‰ä¾¿ç­¾
      container.innerHTML = '';
      notes = [];
      
      // åˆ›å»ºç‰¹æ®Šä¾¿ç­¾ï¼ˆä¸­å¿ƒä½ç½®ï¼‰
      const specialNote = createNote(-1, true);
      notes.push({
        element: specialNote,
        heartX: window.innerWidth / 2,
        heartY: window.innerHeight / 2,
        scatterX: scatterPoints[0].x,
        scatterY: scatterPoints[0].y,
        isSpecial: true
      });
      
      // åˆ›å»ºæ™®é€šä¾¿ç­¾
      for (let i = 0; i < totalNotes - 1; i++) {
        const note = createNote(i);
        notes.push({
          element: note,
          heartX: heartPoints[i].x,
          heartY: heartPoints[i].y,
          scatterX: scatterPoints[i + 1].x,
          scatterY: scatterPoints[i + 1].y,
          isSpecial: false
        });
      }
    }
    
    // æ‰§è¡Œå…¥åœºåŠ¨ç”»ï¼ˆå¼€ç«è½¦å¼ï¼‰
    function animateEntrance() {
      notes.forEach((note, index) => {
        setTimeout(() => {
          const element = note.element;
          const x = note.heartX - element.offsetWidth / 2;
          const y = note.heartY - element.offsetHeight / 2;
          const rotation = element.style.transform.match(/rotate\(([^)]+)\)/)[1];
          
          // ç§»åŠ¨åˆ°çˆ±å¿ƒå½¢çŠ¶ä½ç½®
          element.style.transform = `translate(${x}px, ${y}px) rotate(${rotation})`;
          
          // åˆ°ä½åçš„è½»å¾®æ—‹è½¬åŠ¨ç”»
          setTimeout(() => {
            const newRotation = (parseFloat(rotation) + (Math.random() * 4 - 2)) + 'deg';
            element.style.transition = 'transform 0.5s ease-in-out';
            element.style.transform = `translate(${x}px, ${y}px) rotate(${newRotation})`;
          }, 700);
        }, index * 5); // æ¯ä¸ªä¾¿ç­¾ä¾æ¬¡å…¥åœºï¼Œé—´éš”5ms
      });
    }
    
    // æ‰§è¡Œæ•£å¼€åŠ¨ç”»
    function animateScatter() {
      notes.forEach((note, index) => {
        setTimeout(() => {
          const element = note.element;
          const x = note.scatterX - element.offsetWidth / 2;
          const y = note.scatterY - element.offsetHeight / 2;
          const rotation = (Math.random() * 15 - 7.5) + 'deg';
          
          element.style.transition = 'transform 1.5s ease-out';
          element.style.transform = `translate(${x}px, ${y}px) rotate(${rotation})`;
        }, index * 2); // ä¾æ¬¡æ•£å¼€
      });
    }
    
    // å¼€å§‹åŠ¨ç”»æµç¨‹
    function startAnimation() {
      overlay.classList.add('opacity-0', 'pointer-events-none');
      overlay.style.transition = 'opacity 0.5s ease-out';
      container.classList.remove('opacity-0');
      
      // å¼€å§‹å…¥åœºåŠ¨ç”»
      setTimeout(animateEntrance, 500);
      
      // 5ç§’åå¼€å§‹æ•£å¼€åŠ¨ç”»
      setTimeout(animateScatter, 5000);
    }
    
    // ç»‘å®šæŒ‰é’®äº‹ä»¶
    readyBtn.addEventListener('click', () => {
      if (responseText.classList.contains('hidden')) {
        responseText.textContent = 'ä½ æ²¡æ¯›ç—…';
        responseText.classList.remove('hidden', 'text-red-500');
        responseText.classList.add('text-green-500');
        
        setTimeout(startAnimation, 1000);
      } else {
        startAnimation();
      }
    });
    
    notReadyBtn.addEventListener('click', () => {
      responseText.textContent = 'æœ‰æ¯›ç—…ï¼Ÿ';
      responseText.classList.remove('hidden', 'text-green-500');
      responseText.classList.add('text-red-500');
    });
    
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    window.addEventListener('load', () => {
      initNotes();
    });
    
    // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°æ’åˆ—
    window.addEventListener('resize', () => {
      if (animationStarted) {
        const scatterPoints = generateScatteredPoints(totalNotes);
        
        notes.forEach((note, index) => {
          const element = note.element;
          const x = scatterPoints[index].x - element.offsetWidth / 2;
          const y = scatterPoints[index].y - element.offsetHeight / 2;
          const rotation = element.style.transform.match(/rotate\(([^)]+)\)/)[1];
          
          element.style.transform = `translate(${x}px, ${y}px) rotate(${rotation})`;
        });
      } else {
        initNotes();
      }
    });
  </script>
</body>
</html>
